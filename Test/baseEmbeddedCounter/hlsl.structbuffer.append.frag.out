hlsl.structbuffer.append.frag
Shader version: 500
gl_FragCoord origin is upper left
0:? Sequence
0:7  Function Definition: @main(u1; ( temp 4-component vector of float)
0:7    Function Parameters: 
0:7      'pos' ( in uint)
0:?     Sequence
0:8      move second child to first child ( temp 4-component vector of float)
0:8        indirect index (layout( row_major std430) buffer 4-component vector of float)
0:8          @data: direct index for structure (layout( row_major std430) buffer unsized 1-element array of 4-component vector of float)
0:8            'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:8            Constant:
0:8              1 (const uint)
0:8          AtomicAdd ( temp uint)
0:8            @count: direct index for structure ( temp uint)
0:8              'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:8              Constant:
0:8                0 (const int)
0:8            Constant:
0:8              1 (const uint)
0:?         Constant:
0:?           1.000000
0:?           2.000000
0:?           3.000000
0:?           4.000000
0:10      Branch: Return with expression
0:10        indirect index (layout( row_major std430) buffer 4-component vector of float)
0:10          @data: direct index for structure (layout( row_major std430) buffer unsized 1-element array of 4-component vector of float)
0:10            'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:10            Constant:
0:10              1 (const uint)
0:10          add ( temp uint)
0:10            AtomicAdd ( temp uint)
0:10              @count: direct index for structure ( temp uint)
0:10                'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:10                Constant:
0:10                  0 (const int)
0:10              Constant:
0:10                4294967295 (const uint)
0:10            Constant:
0:10              -1 (const int)
0:7  Function Definition: main( ( temp void)
0:7    Function Parameters: 
0:?     Sequence
0:7      move second child to first child ( temp uint)
0:?         'pos' ( temp uint)
0:?         'pos' (layout( location=0) flat in uint)
0:7      move second child to first child ( temp 4-component vector of float)
0:?         '@entryPointOutput' (layout( location=0) out 4-component vector of float)
0:7        Function Call: @main(u1; ( temp 4-component vector of float)
0:?           'pos' ( temp uint)
0:?   Linker Objects
0:?     'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:?     'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:?     'sbuf_unused' (layout( row_major std430) buffer block{layout( row_major std430) buffer unsized 1-element array of 4-component vector of float @data})
0:?     '@entryPointOutput' (layout( location=0) out 4-component vector of float)
0:?     'pos' (layout( location=0) flat in uint)


Linked fragment stage:


Shader version: 500
gl_FragCoord origin is upper left
0:? Sequence
0:7  Function Definition: @main(u1; ( temp 4-component vector of float)
0:7    Function Parameters: 
0:7      'pos' ( in uint)
0:?     Sequence
0:8      move second child to first child ( temp 4-component vector of float)
0:8        indirect index (layout( row_major std430) buffer 4-component vector of float)
0:8          @data: direct index for structure (layout( row_major std430) buffer unsized 1-element array of 4-component vector of float)
0:8            'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:8            Constant:
0:8              1 (const uint)
0:8          AtomicAdd ( temp uint)
0:8            @count: direct index for structure ( temp uint)
0:8              'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:8              Constant:
0:8                0 (const int)
0:8            Constant:
0:8              1 (const uint)
0:?         Constant:
0:?           1.000000
0:?           2.000000
0:?           3.000000
0:?           4.000000
0:10      Branch: Return with expression
0:10        indirect index (layout( row_major std430) buffer 4-component vector of float)
0:10          @data: direct index for structure (layout( row_major std430) buffer unsized 1-element array of 4-component vector of float)
0:10            'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:10            Constant:
0:10              1 (const uint)
0:10          add ( temp uint)
0:10            AtomicAdd ( temp uint)
0:10              @count: direct index for structure ( temp uint)
0:10                'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:10                Constant:
0:10                  0 (const int)
0:10              Constant:
0:10                4294967295 (const uint)
0:10            Constant:
0:10              -1 (const int)
0:7  Function Definition: main( ( temp void)
0:7    Function Parameters: 
0:?     Sequence
0:7      move second child to first child ( temp uint)
0:?         'pos' ( temp uint)
0:?         'pos' (layout( location=0) flat in uint)
0:7      move second child to first child ( temp 4-component vector of float)
0:?         '@entryPointOutput' (layout( location=0) out 4-component vector of float)
0:7        Function Call: @main(u1; ( temp 4-component vector of float)
0:?           'pos' ( temp uint)
0:?   Linker Objects
0:?     'sbuf_a' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:?     'sbuf_c' (layout( row_major std430) buffer block{ buffer uint @count, layout( row_major std430 offset=256) buffer unsized 1-element array of 4-component vector of float @data})
0:?     'sbuf_unused' (layout( row_major std430) buffer block{layout( row_major std430) buffer unsized 1-element array of 4-component vector of float @data})
0:?     '@entryPointOutput' (layout( location=0) out 4-component vector of float)
0:?     'pos' (layout( location=0) flat in uint)

// Module Version 10000
// Generated by (magic number): 80007
// Id's are bound by 56

                              Capability Shader
               1:             ExtInstImport  "GLSL.std.450"
                              MemoryModel Logical GLSL450
                              EntryPoint Fragment 4  "main" 45 48
                              ExecutionMode 4 OriginUpperLeft
                              Source HLSL 500
                              Name 4  "main"
                              Name 12  "@main(u1;"
                              Name 11  "pos"
                              Name 15  "sbuf_a"
                              MemberName 15(sbuf_a) 0  "@count"
                              MemberName 15(sbuf_a) 1  "@data"
                              Name 17  "sbuf_a"
                              Name 33  "sbuf_c"
                              Name 43  "pos"
                              Name 45  "pos"
                              Name 48  "@entryPointOutput"
                              Name 49  "param"
                              Name 53  "sbuf_unused"
                              MemberName 53(sbuf_unused) 0  "@data"
                              Name 55  "sbuf_unused"
                              Decorate 14 ArrayStride 16
                              MemberDecorate 15(sbuf_a) 0 Offset 0
                              MemberDecorate 15(sbuf_a) 1 Offset 256
                              Decorate 15(sbuf_a) BufferBlock
                              Decorate 17(sbuf_a) DescriptorSet 0
                              Decorate 33(sbuf_c) DescriptorSet 0
                              Decorate 45(pos) Flat
                              Decorate 45(pos) Location 0
                              Decorate 48(@entryPointOutput) Location 0
                              Decorate 52 ArrayStride 16
                              MemberDecorate 53(sbuf_unused) 0 Offset 0
                              Decorate 53(sbuf_unused) BufferBlock
                              Decorate 55(sbuf_unused) DescriptorSet 0
               2:             TypeVoid
               3:             TypeFunction 2
               6:             TypeInt 32 0
               7:             TypePointer Function 6(int)
               8:             TypeFloat 32
               9:             TypeVector 8(float) 4
              10:             TypeFunction 9(fvec4) 7(ptr)
              14:             TypeRuntimeArray 9(fvec4)
      15(sbuf_a):             TypeStruct 6(int) 14
              16:             TypePointer Uniform 15(sbuf_a)
      17(sbuf_a):     16(ptr) Variable Uniform
              18:             TypeInt 32 1
              19:     18(int) Constant 1
              20:     18(int) Constant 0
              21:             TypePointer Uniform 6(int)
              23:      6(int) Constant 1
              24:      6(int) Constant 0
              26:    8(float) Constant 1065353216
              27:    8(float) Constant 1073741824
              28:    8(float) Constant 1077936128
              29:    8(float) Constant 1082130432
              30:    9(fvec4) ConstantComposite 26 27 28 29
              31:             TypePointer Uniform 9(fvec4)
      33(sbuf_c):     16(ptr) Variable Uniform
              35:      6(int) Constant 4294967295
              37:     18(int) Constant 4294967295
              44:             TypePointer Input 6(int)
         45(pos):     44(ptr) Variable Input
              47:             TypePointer Output 9(fvec4)
48(@entryPointOutput):     47(ptr) Variable Output
              52:             TypeRuntimeArray 9(fvec4)
 53(sbuf_unused):             TypeStruct 52
              54:             TypePointer Uniform 53(sbuf_unused)
 55(sbuf_unused):     54(ptr) Variable Uniform
         4(main):           2 Function None 3
               5:             Label
         43(pos):      7(ptr) Variable Function
       49(param):      7(ptr) Variable Function
              46:      6(int) Load 45(pos)
                              Store 43(pos) 46
              50:      6(int) Load 43(pos)
                              Store 49(param) 50
              51:    9(fvec4) FunctionCall 12(@main(u1;) 49(param)
                              Store 48(@entryPointOutput) 51
                              Return
                              FunctionEnd
   12(@main(u1;):    9(fvec4) Function None 10
         11(pos):      7(ptr) FunctionParameter
              13:             Label
              22:     21(ptr) AccessChain 17(sbuf_a) 20
              25:      6(int) AtomicIAdd 22 23 24 23
              32:     31(ptr) AccessChain 17(sbuf_a) 19 25
                              Store 32 30
              34:     21(ptr) AccessChain 33(sbuf_c) 20
              36:      6(int) AtomicIAdd 34 23 24 35
              38:      6(int) IAdd 36 37
              39:     31(ptr) AccessChain 33(sbuf_c) 19 38
              40:    9(fvec4) Load 39
                              ReturnValue 40
                              FunctionEnd
